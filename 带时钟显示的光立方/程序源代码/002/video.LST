C51 COMPILER V9.00   VIDEO                                                                 08/19/2014 19:44:31 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE VIDEO
OBJECT MODULE PLACED IN video.OBJ
COMPILER INVOKED BY: D:\Program Files\keil\C51\BIN\C51.EXE video.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1                          
   2          #include <stc12c5a60s2.H>
   3          #include <intrins.h>
   4          #include "VIDEO.H"
   5          #include "KEY.H"
   6          #include "IR.H"
   7          
   8          
   9          
  10          
  11          #define uchar unsigned char
  12          
  13          #define uint unsigned int
  14          
  15          
  16          
  17          
  18          
  19          
  20          uchar idata display[8][8];
  21          
  22          /*rank:A,1,2,3,4,I,心,U*/
  23          
  24          uchar code table_cha[8][8]={0x51,0x51,0x51,0x4a,0x4a,0x4a,0x44,0x44,
  25                                                                  0x18,0x1c,0x18,0x18,0x18,0x18,0x18,0x3c,
  26                                                                  0x3c,0x66,0x66,0x30,0x18,0xc,0x6,0xf6,
  27                                                                  0x3c,0x66,0x60,0x38,0x60,0x60,0x66,0x3c,
  28                                                                  0x30,0x38,0x3c,0x3e,0x36,0x7e,0x30,0x30,
  29                                                                  0x3c,0x3c,0x18,0x18,0x18,0x18,0x3c,0x3c,                                        
  30                                                                  0x00,0x18,0x3c,0x7e,0xff,0xff,0xff,0x66,
  31                                                                  0x00,0x3c,0x7e,0x66,0x66,0x66,0x66,0x66,
  32                                                                  };
  33          uchar code flash[18]={6,1,2,3,3,5,4,6,7,8,0,9,8,5,6,7,8,9};
  34          /*the "ideasoft"*/// 1金字塔 2面移动 3斜面  4下雨 5半面 6i*u
  35                                                  //7面旋转  8四方体    9波浪 
  36          
  37          uchar code table_id[40]={0x81,0xff,0x81,0x00,0xff,0x81,0x81,0x7e,0x00,0xff,0x89,0x89,0x00,0xf8,0x27,0x27,0
             -xf8,0x00,0x8f,0x89,0x89,0xf9,0x00,0xff,0x81,0x81,0xff,0x00,0xff,0x09,0x09,0x09,0x01,0x0,0x01,0x01,0xff,0x01,0x01,0x00};
  38          
  39          /*railway*/
  40          
  41          uchar code dat[128]={0x0,0x20,0x40,0x60,0x80,0xa0,0xc0,0xe0,0xe4,0xe8,0xec,0xf0,0xf4,0xf8,0xfc,0xdc,0xbc,0
             -x9c,0x7c,0x5c,0x3c,0x1c,0x18,0x14,0x10,0xc,0x8,0x4,0x25,0x45,0x65,0x85,0xa5,0xc5,0xc9,0xcd,0xd1,0xd5,0xd9,0xb9,0x99,0x79
             -,0x59,0x39,0x35,0x31,0x2d,0x29,0x4a,0x6a,0x8a,0xaa,0xae,0xb2,0xb6,0x96,0x76,0x56,0x52,0x4e,0x6f,0x8f,0x93,0x73,0x6f,0x8f
             -,0x93,0x73,0x4a,0x6a,0x8a,0xaa,0xae,0xb2,0xb6,0x96,0x76,0x56,0x52,0x4e,0x25,0x45,0x65,0x85,0xa5,0xc5,0xc9,0xcd,0xd1,0xd5
             -,0xd9,0xb9,0x99,0x79,0x59,0x39,0x35,0x31,0x2d,0x29,0x0,0x20,0x40,0x60,0x80,0xa0,0xc0,0xe0,0xe4,0xe8,0xec,0xf0,0xf4,0xf8,
             -0xfc,0xdc,0xbc,0x9c,0x7c,0x5c,0x3c,0x1c,0x18,0x14,0x10,0xc,0x8,0x4};
  42          
  43          /*railway 2*/
  44          
  45          uchar code dat2[28]={0x0,0x20,0x40,0x60,0x80,0xa0,0xc0,0xe0,0xe4,0xe8,0xec,0xf0,0xf4,0xf8,0xfc,0xdc,0xbc,0
             -x9c,0x7c,0x5c,0x3c,0x1c,0x18,0x14,0x10,0xc,0x8,0x4};
  46          
  47          /*railway 3*/
  48          
C51 COMPILER V9.00   VIDEO                                                                 08/19/2014 19:44:31 PAGE 2   

  49          uchar code dat3[24]={0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x16,0x26,0x36,0x46,0x56,0x66,0x65,0x64,0x63,0x62,
             -0x61,0x60,0x50,0x40,0x30,0x20,0x10};
  50          
  51          /*3p char*/
  52          
  53          uchar code table_3p[3][8]={0xff,0x89,0xf5,0x93,0x93,0xf5,0x89,0xff,0x0e,0x1f,0x3f,0x7e,0x7e,0x3f,0x1f,0x0e
             -,0x18,0x3c,0x7e,0xff,0x18,0x18,0x18,0x18};
  54          
  55          /*initializtion
  56          
  57          That is to initialize the program .
  58          
  59          It is write to set the timer in c52 mcu.
  60          
  61          So the program can renovate the led_3d_cube in fixed time use the interrupt function.*/
  62          
  63          
  64          
  65          void sinter();
  66          void delay5us(void);
  67          void delay(uint i);
  68          uchar judgebit(uchar num,uchar b);
  69          uchar abs(uchar a);
  70          uchar abss(char a) ;
  71          void max(uchar *a,uchar *b);
  72          uchar maxt(uchar a,uchar b,uchar c);
  73          void clear(char le);
  74          void trailler(uint speed);
  75          void point(uchar x,uchar y,uchar z,uchar le);
  76          void type(uchar cha,uchar y);
  77          void cirp(char cpp,uchar dir,uchar le);
  78          void line(uchar x1,uchar y1,uchar z1,uchar x2,uchar y2,uchar z2,uchar le);
  79          void box(uchar x1,uchar y1,uchar z1,uchar x2,uchar y2,uchar z2,uchar fill,uchar le);
  80          void box_apeak_xy(uchar x1,uchar y1,uchar z1,uchar x2,uchar y2,uchar z2,uchar fill,uchar le);
  81          void poke(uchar n,uchar x,uchar y);
  82          void boxtola(char i,uchar n);
  83          void rolldisplay(uint speed);
  84          void roll_apeak_yz(uchar n,uint speed);
  85          void roll_apeak_xy(uchar n,uint speed);
  86          void roll_3_xy(uchar n,uint speed);
  87          void trans(uchar z,uint speed);
  88          void tranoutchar(uchar c,uint speed);
  89          void transss();
  90          void flash_2();
  91          void flash_3();
  92          void flash_4();
  93          void flash_5();
  94          void flash_6();
  95          void flash_7();
  96          void flash_8();
  97          void flash_9();
  98          void flash_10();
  99          void flash_11();
 100          
 101          void sinter()
 102          
 103          {
 104   1               TL0=0;
 105   1               TR0=1;
 106   1      }
 107          
 108          void delay5us(void)   //误差 -0.026765046296us STC 1T 22.1184Mhz
C51 COMPILER V9.00   VIDEO                                                                 08/19/2014 19:44:31 PAGE 3   

 109          {
 110   1          unsigned char a,b;
 111   1          for(b=7;b>0;b--)
 112   1              for(a=2;a>0;a--);
 113   1      }
 114          
 115          void delay(uint i)
 116          
 117          {                                                                                                     
 118   1      
 119   1               while (i--){
 120   2                       delay5us();}//12t的mcu 注释这个延时即可
 121   1      }
 122          
 123          /*To judge the num bit*/
 124          
 125          uchar judgebit(uchar num,uchar b)
 126          
 127          {
 128   1      
 129   1               char n;
 130   1      
 131   1               num=num&(1<<b);
 132   1      
 133   1               if (num)
 134   1      
 135   1               n=1;
 136   1      
 137   1               else
 138   1      
 139   1               n=0;
 140   1      
 141   1               return n;
 142   1      
 143   1      }
 144          
 145          /*To figure out the round number*/
 146          
 147          uchar abs(uchar a)
 148          
 149          {
 150   1      
 151   1               uchar b;
 152   1      
 153   1               b=a/10;
 154   1      
 155   1               a=a-b*10;
 156   1      
 157   1               if (a>=5)
 158   1      
 159   1               b++;
 160   1      
 161   1               return b;
 162   1      
 163   1      }
 164          
 165          /*To figure out the absolute value*/
 166          
 167          uchar abss(char a)
 168          
 169          {
 170   1      
C51 COMPILER V9.00   VIDEO                                                                 08/19/2014 19:44:31 PAGE 4   

 171   1               if (a<0)
 172   1      
 173   1               a=-a;
 174   1      
 175   1               return a;
 176   1      
 177   1      }
 178          
 179          /*The function can comparat the character.
 180          
 181          And remove the big one to the back.*/
 182          
 183          void max(uchar *a,uchar *b)
 184          
 185          {
 186   1      
 187   1         uchar t;
 188   1      
 189   1         if ((*a)>(*b))
 190   1      
 191   1         {
 192   2      
 193   2                         t=(*a);
 194   2      
 195   2                         (*a)=(*b);
 196   2      
 197   2                         (*b)=t;   
 198   2      
 199   2         }
 200   1      
 201   1      }
 202          
 203          /*The function is to figure out the max number and return it.*/
 204          
 205          uchar maxt(uchar a,uchar b,uchar c)
 206          
 207          {
 208   1      
 209   1               if (a<b)
 210   1      
 211   1               a=b;
 212   1      
 213   1               if (a<c)
 214   1      
 215   1               a=c;
 216   1      
 217   1               return a;
 218   1      
 219   1      }
 220          
 221          void clear(char le)
 222          
 223          {
 224   1      
 225   1               uchar i,j;
 226   1      
 227   1               for (j=0;j<8;j++)
 228   1      
 229   1               {
 230   2      
 231   2                         for (i=0;i<8;i++)
 232   2      
C51 COMPILER V9.00   VIDEO                                                                 08/19/2014 19:44:31 PAGE 5   

 233   2                         display[j][i]=le;
 234   2      
 235   2               }
 236   1      
 237   1      }
 238          
 239          void trailler(uint speed)
 240          
 241          {
 242   1      
 243   1               char i,j;
 244   1      
 245   1               for (i=6;i>=-3;i--)
 246   1      
 247   1               {
 248   2      
 249   2                         if (i>=0)
 250   2      
 251   2                         {
 252   3      
 253   3                                  for (j=0;j<8;j++)
 254   3      
 255   3                                  display[j][i]=display[j][i+1];
 256   3      
 257   3                         }
 258   2      
 259   2                         if (i<4)
 260   2      
 261   2                         {
 262   3      
 263   3                                  for (j=0;j<8;j++)
 264   3      
 265   3                                  display[j][i+4]=0;
 266   3      
 267   3                         }
 268   2      
 269   2                         delay(speed);
 270   2      
 271   2               }
 272   1      
 273   1      }
 274          
 275          void point(uchar x,uchar y,uchar z,uchar le)
 276          
 277          {
 278   1      
 279   1               uchar ch1,ch0;
 280   1      
 281   1               ch1=1<<x;
 282   1      
 283   1               ch0=~ch1;
 284   1      
 285   1               if (le) 
 286   1      
 287   1               display[z][y]=display[z][y]|ch1;
 288   1      
 289   1               else 
 290   1      
 291   1               display[z][y]=display[z][y]&ch0;
 292   1      
 293   1      }
 294          
C51 COMPILER V9.00   VIDEO                                                                 08/19/2014 19:44:31 PAGE 6   

 295          void type(uchar cha,uchar y)
 296          
 297          {        
 298   1      
 299   1               uchar xx;
 300   1      
 301   1               for (xx=0;xx<8;xx++)
 302   1      
 303   1               {
 304   2      
 305   2               display[xx][y]=table_cha[cha][xx];
 306   2      
 307   2               }
 308   1      
 309   1      }
 310          
 311          /*The first variable is the distance from the midpoint.
 312          
 313          The second is the layer.
 314          
 315          the third is the flash speed of the time between each two point.
 316          
 317          The forth is the enable io,it controls weather draw or claen.*/
 318          
 319          void cirp(char cpp,uchar dir,uchar le)
 320          
 321          {
 322   1      
 323   1               uchar a,b,c,cp;
 324   1      
 325   1               if ((cpp<128)&(cpp>=0))
 326   1      
 327   1               {
 328   2      
 329   2                         if (dir)
 330   2      
 331   2                         cp=127-cpp;
 332   2      
 333   2                         else 
 334   2      
 335   2                         cp=cpp; 
 336   2      
 337   2                         a=(dat[cp]>>5)&0x07;
 338   2      
 339   2                         b=(dat[cp]>>2)&0x07;
 340   2      
 341   2                         c=dat[cp]&0x03;
 342   2      
 343   2                         if (cpp>63)
 344   2      
 345   2                         c=7-c;
 346   2      
 347   2                         point (a,b,c,le);
 348   2      
 349   2               }
 350   1      
 351   1      }
 352          
 353          void line(uchar x1,uchar y1,uchar z1,uchar x2,uchar y2,uchar z2,uchar le)
 354          
 355          {
 356   1      
C51 COMPILER V9.00   VIDEO                                                                 08/19/2014 19:44:31 PAGE 7   

 357   1               char t,a,b,c,a1,b1,c1,i;
 358   1      
 359   1               a1=x2-x1;
 360   1      
 361   1               b1=y2-y1;
 362   1      
 363   1               c1=z2-z1;
 364   1      
 365   1               t=maxt(abss(a1),abss(b1),abss(c1));
 366   1      
 367   1               a=x1*10;
 368   1      
 369   1               b=y1*10;
 370   1      
 371   1               c=z1*10;
 372   1      
 373   1               a1=a1*10/t;
 374   1      
 375   1               b1=b1*10/t;
 376   1      
 377   1               c1=c1*10/t;
 378   1      
 379   1               for (i=0;i<t;i++)
 380   1      
 381   1               {
 382   2      
 383   2                         point(abs(a),abs(b),abs(c),le);
 384   2      
 385   2                         a+=a1;
 386   2      
 387   2                         b+=b1;
 388   2      
 389   2                         c+=c1;
 390   2      
 391   2               }
 392   1      
 393   1               point(x2,y2,z2,le);
 394   1      
 395   1      }
 396          
 397          void box(uchar x1,uchar y1,uchar z1,uchar x2,uchar y2,uchar z2,uchar fill,uchar le)
 398          
 399          {
 400   1      
 401   1               uchar i,j,t=0;
 402   1      
 403   1               max(&x1,&x2);
 404   1      
 405   1               max(&y1,&y2);
 406   1      
 407   1               max(&z1,&z2);
 408   1      
 409   1               for (i=x1;i<=x2;i++)
 410   1      
 411   1                         t|=1<<i;
 412   1      
 413   1               if (!le)
 414   1      
 415   1                         t=~t;
 416   1      
 417   1               if (fill)
 418   1      
C51 COMPILER V9.00   VIDEO                                                                 08/19/2014 19:44:31 PAGE 8   

 419   1               {
 420   2      
 421   2                         if (le)
 422   2      
 423   2                         {
 424   3      
 425   3                                  for (i=z1;i<=z2;i++)
 426   3      
 427   3                                  {
 428   4      
 429   4                                           for (j=y1;j<=y2;j++)
 430   4      
 431   4                                                     display[j][i]|=t;
 432   4      
 433   4                                  }
 434   3      
 435   3                         }
 436   2      
 437   2                         else
 438   2      
 439   2                         {
 440   3      
 441   3                                  for (i=z1;i<=z2;i++)
 442   3      
 443   3                                  {
 444   4      
 445   4                                           for (j=y1;j<=y2;j++)
 446   4      
 447   4                                                     display[j][i]&=t;
 448   4      
 449   4                                  }
 450   3      
 451   3                         }
 452   2      
 453   2               }
 454   1      
 455   1               else
 456   1      
 457   1               {
 458   2      
 459   2                         if (le)
 460   2      
 461   2                         {
 462   3      
 463   3                                  display[y1][z1]|=t;
 464   3      
 465   3                                  display[y2][z1]|=t;
 466   3      
 467   3                                  display[y1][z2]|=t;
 468   3      
 469   3                                  display[y2][z2]|=t;
 470   3      
 471   3                         }
 472   2      
 473   2                         else
 474   2      
 475   2                         {
 476   3      
 477   3                                 display[y1][z1]&=t;
 478   3      
 479   3                                  display[y2][z1]&=t;
 480   3      
C51 COMPILER V9.00   VIDEO                                                                 08/19/2014 19:44:31 PAGE 9   

 481   3                                  display[y1][z2]&=t;
 482   3      
 483   3                                  display[y2][z2]&=t;
 484   3      
 485   3                         }
 486   2      
 487   2                         t=(0x01<<x1)|(0x01<<x2);
 488   2      
 489   2                         if (!le)
 490   2      
 491   2                                  t=~t;
 492   2      
 493   2                         if (le)
 494   2      
 495   2                         {
 496   3      
 497   3                                  for (j=z1;j<=z2;j+=(z2-z1))
 498   3      
 499   3                                  {
 500   4      
 501   4                                           for (i=y1;i<=y2;i++)
 502   4      
 503   4                                                     display[i][j]|=t;
 504   4      
 505   4                                  }
 506   3      
 507   3                                  for (j=y1;j<=y2;j+=(y2-y1))
 508   3      
 509   3                                  {
 510   4      
 511   4                                           for (i=z1;i<=z2;i++)
 512   4      
 513   4                                                     display[j][i]|=t;
 514   4      
 515   4                                  }
 516   3      
 517   3                         }
 518   2      
 519   2                         else
 520   2      
 521   2                         {
 522   3      
 523   3                                  for (j=z1;j<=z2;j+=(z2-z1))
 524   3      
 525   3                                  {
 526   4      
 527   4                                           for (i=y1;i<=y2;i++)
 528   4      
 529   4                                           {
 530   5      
 531   5                                           display[i][j]&=t;
 532   5      
 533   5                                           }
 534   4      
 535   4                                  }
 536   3      
 537   3                                  for (j=y1;j<=y2;j+=(y2-y1))
 538   3      
 539   3                                  {
 540   4      
 541   4                                           for (i=z1;i<=z2;i++)
 542   4      
C51 COMPILER V9.00   VIDEO                                                                 08/19/2014 19:44:31 PAGE 10  

 543   4                                           {
 544   5      
 545   5                                           display[j][i]&=t;
 546   5      
 547   5                                           }
 548   4      
 549   4                                  }
 550   3      
 551   3                         }
 552   2      
 553   2               }
 554   1      
 555   1      }
 556          
 557          void box_apeak_xy(uchar x1,uchar y1,uchar z1,uchar x2,uchar y2,uchar z2,uchar fill,uchar le)
 558          
 559          {
 560   1      
 561   1               uchar i;
 562   1      
 563   1               max(&z1,&z2);
 564   1      
 565   1               if (fill)
 566   1      
 567   1               {
 568   2      
 569   2                         for (i=z1;i<=z2;i++)
 570   2      
 571   2                         {
 572   3      
 573   3                                  line (x1,y1,i,x2,y2,i,le);
 574   3      
 575   3                         } 
 576   2      
 577   2               } 
 578   1      
 579   1               else
 580   1      
 581   1               {
 582   2      
 583   2                         line (x1,y1,z1,x2,y2,z1,le);
 584   2      
 585   2                         line (x1,y1,z2,x2,y2,z2,le);
 586   2      
 587   2                         line (x2,y2,z1,x2,y2,z2,le);
 588   2      
 589   2                         line (x1,y1,z1,x1,y1,z2,le);
 590   2      
 591   2               }
 592   1      
 593   1      }
 594          
 595          void poke(uchar n,uchar x,uchar y)
 596          
 597          {
 598   1      
 599   1               uchar i;
 600   1      
 601   1               for (i=0;i<8;i++)
 602   1      
 603   1               {
 604   2      
C51 COMPILER V9.00   VIDEO                                                                 08/19/2014 19:44:31 PAGE 11  

 605   2                point(x,y,i,judgebit(n,i));
 606   2      
 607   2               }
 608   1      
 609   1      }
 610          
 611          void boxtola(char i,uchar n)
 612          
 613          {
 614   1      
 615   1               if ((i>=0)&(i<8))
 616   1      
 617   1               {
 618   2      
 619   2                         poke(n,0,7-i);
 620   2      
 621   2               }
 622   1      
 623   1               if ((i>=8)&(i<16))
 624   1      
 625   1               {
 626   2      
 627   2                         poke(n,i-8,0);
 628   2      
 629   2               }
 630   1      
 631   1               if ((i>=16)&(i<24))
 632   1      
 633   1               {
 634   2      
 635   2                         poke(n,7,i-16);
 636   2      
 637   2               }
 638   1      
 639   1       
 640   1      
 641   1      }
 642          
 643          void rolldisplay(uint speed)
 644          
 645          {
 646   1      
 647   1               uchar j;
 648   1      
 649   1               char i,a;
 650   1      
 651   1               for (i=23;i>-40;i--)
 652   1      
 653   1               {
 654   2      
 655   2                         for (j=0;j<40;j++)
 656   2      
 657   2                         {
 658   3      
 659   3                                  a=i+j;
 660   3      
 661   3                                  if ((a>=0)&(a<24))
 662   3      
 663   3                                  boxtola(a,table_id[j]);
 664   3      
 665   3                         }
 666   2      
C51 COMPILER V9.00   VIDEO                                                                 08/19/2014 19:44:31 PAGE 12  

 667   2                         delay(speed);
 668   2      
 669   2               }
 670   1      
 671   1      }
 672          
 673          void roll_apeak_yz(uchar n,uint speed)
 674          
 675          {
 676   1      
 677   1               uchar i;
 678   1      
 679   1               switch(n)
 680   1      
 681   1               {
 682   2      
 683   2                         case 1:
 684   2      
 685   2                                  for (i=0;i<7;i++)
 686   2      
 687   2                                  {
 688   3      
 689   3                                           display[i][7]=0;
 690   3      
 691   3                                           display[7][6-i]=255;
 692   3      
 693   3                                           delay(speed);
 694   3      
 695   3                                  };
 696   2      
 697   2                                  break;
 698   2      
 699   2                         case 2:
 700   2      
 701   2                                  for (i=0;i<7;i++)
 702   2      
 703   2                                  {
 704   3      
 705   3                                           display[7][7-i]=0;
 706   3      
 707   3                                           display[6-i][0]=255;
 708   3      
 709   3                                           delay(speed);
 710   3      
 711   3                                  };
 712   2      
 713   2                                  break;
 714   2      
 715   2                         case 3:
 716   2      
 717   2                                  for (i=0;i<7;i++)
 718   2      
 719   2                                  {
 720   3      
 721   3                                           display[7-i][0]=0;
 722   3      
 723   3                                           display[0][i+1]=255;
 724   3      
 725   3                                           delay(speed);
 726   3      
 727   3                                  };
 728   2      
C51 COMPILER V9.00   VIDEO                                                                 08/19/2014 19:44:31 PAGE 13  

 729   2                                  break;
 730   2      
 731   2                         case 0:
 732   2      
 733   2                                  for (i=0;i<7;i++)
 734   2      
 735   2                                  {
 736   3      
 737   3                                           display[0][i]=0;
 738   3      
 739   3                                           display[i+1][7]=255;
 740   3      
 741   3                                           delay(speed);
 742   3      
 743   3                                  };
 744   2      
 745   2               }
 746   1      
 747   1      }
 748          
 749          void roll_apeak_xy(uchar n,uint speed)
 750          
 751          {
 752   1      
 753   1               uchar i;
 754   1      
 755   1               switch(n)
 756   1      
 757   1               {
 758   2      
 759   2                         case 1:
 760   2      
 761   2                                  for (i=0;i<7;i++)
 762   2      
 763   2                                  {
 764   3      
 765   3                                           line(0,i,0,0,i,7,0);
 766   3      
 767   3                                           line(i+1,7,0,i+1,7,7,1);
 768   3      
 769   3                                           delay(speed);
 770   3      
 771   3                                  };
 772   2      
 773   2                                  break;
 774   2      
 775   2                         case 2:
 776   2      
 777   2                                  for (i=0;i<7;i++)
 778   2      
 779   2                                  {
 780   3      
 781   3                                           line(i,7,0,i,7,7,0);
 782   3      
 783   3                                           line(7,6-i,0,7,6-i,7,1);
 784   3      
 785   3                                           delay(speed);
 786   3      
 787   3                                  };
 788   2      
 789   2                                  break;
 790   2      
C51 COMPILER V9.00   VIDEO                                                                 08/19/2014 19:44:31 PAGE 14  

 791   2                         case 3:
 792   2      
 793   2                                  for (i=0;i<7;i++)
 794   2      
 795   2                                  {
 796   3      
 797   3                                           line(7,7-i,0,7,7-i,7,0);
 798   3      
 799   3                                           line(6-i,0,0,6-i,0,7,1);
 800   3      
 801   3                                           delay(speed);
 802   3      
 803   3                                  };
 804   2      
 805   2                                  break;
 806   2      
 807   2                         case 0:
 808   2      
 809   2                                  for (i=0;i<7;i++)
 810   2      
 811   2                                  {
 812   3      
 813   3                                           line(7-i,0,0,7-i,0,7,0);
 814   3      
 815   3                                           line(0,i+1,0,0,i+1,7,1);
 816   3      
 817   3                                           delay(speed);
 818   3      
 819   3                                  };
 820   2      
 821   2               }
 822   1      
 823   1      }
 824          
 825          void roll_3_xy(uchar n,uint speed)
 826          
 827          {
 828   1      
 829   1               uchar i;
 830   1      
 831   1               switch(n)
 832   1      
 833   1               {
 834   2      
 835   2                         case 1:
 836   2      
 837   2                                  for (i=0;i<8;i++)
 838   2      
 839   2                                  {
 840   3      
 841   3                                           box_apeak_xy (0,i,0,7,7-i,7,1,1);
 842   3      
 843   3                                           delay(speed);
 844   3      
 845   3                                           if (i<7)
 846   3      
 847   3                                           box_apeak_xy (3,3,0,0,i,7,1,0);
 848   3      
 849   3                                  };
 850   2      
 851   2                                  break;
 852   2      
C51 COMPILER V9.00   VIDEO                                                                 08/19/2014 19:44:31 PAGE 15  

 853   2                         case 2:
 854   2      
 855   2                                  for (i=0;i<8;i++)
 856   2      
 857   2                                  {
 858   3      
 859   3                                            box_apeak_xy (7-i,0,0,i,7,7,1,1);
 860   3      
 861   3                                           delay(speed);
 862   3      
 863   3                                           if (i<7)
 864   3      
 865   3                                           box_apeak_xy (3,4,0,i,7,7,1,0);
 866   3      
 867   3                                  };
 868   2      
 869   2                                  break;
 870   2      
 871   2                         case 3:
 872   2      
 873   2                                  for (i=0;i<8;i++)
 874   2      
 875   2                                  {
 876   3      
 877   3                                           box_apeak_xy (0,i,0,7,7-i,7,1,1);
 878   3      
 879   3                                           delay(speed);
 880   3      
 881   3                                           if (i<7)
 882   3      
 883   3                                           box_apeak_xy (4,4,0,7,7-i,7,1,0);
 884   3      
 885   3                                  };
 886   2      
 887   2                                  break;
 888   2      
 889   2                         case 0:
 890   2      
 891   2                                  for (i=0;i<8;i++)
 892   2      
 893   2                                  {
 894   3      
 895   3                                           box_apeak_xy (7-i,0,0,i,7,7,1,1);
 896   3      
 897   3                                           delay(speed);
 898   3      
 899   3                                           if (i<7)
 900   3      
 901   3                                           box_apeak_xy (4,3,0,7-i,0,7,1,0);
 902   3      
 903   3                                  };
 904   2      
 905   2               }
 906   1      
 907   1      }
 908          
 909          void trans(uchar z,uint speed)
 910          
 911          {
 912   1      
 913   1               uchar i,j;
 914   1      
C51 COMPILER V9.00   VIDEO                                                                 08/19/2014 19:44:31 PAGE 16  

 915   1               for (j=0;j<8;j++)
 916   1      
 917   1               {
 918   2      
 919   2                         for (i=0;i<8;i++)
 920   2      
 921   2                         {
 922   3      
 923   3                                  display[z][i]>>=1;
 924   3      
 925   3                         }
 926   2      
 927   2                         delay(speed);
 928   2      
 929   2               }
 930   1      
 931   1      }
 932          
 933          void tranoutchar(uchar c,uint speed)
 934          
 935          {
 936   1      
 937   1               uchar i,j,k,a,i2=0;
 938   1      
 939   1               for (i=0;i<8;i++)
 940   1      
 941   1               {
 942   2      
 943   2                         if (i<7)
 944   2      
 945   2                         box_apeak_xy (i+1,0,0,i+1,7,7,1,1);
 946   2      
 947   2                         box_apeak_xy (i2,0,0,i2,7,7,1,0);
 948   2      
 949   2                         a=0;
 950   2      
 951   2                         i2=i+1;
 952   2      
 953   2                         for (j=0;j<=i;j++)
 954   2      
 955   2                         {
 956   3      
 957   3                                  a=a|(1<<j);
 958   3      
 959   3                         }
 960   2      
 961   2                         for (k=0;k<8;k++)
 962   2      
 963   2                         {
 964   3      
 965   3                                  display[k][3]|=table_cha[c][k]&a;
 966   3      
 967   3                                  display[k][3]|=table_cha[c][k]&a;
 968   3      
 969   3                         }
 970   2      
 971   2                         delay(speed);
 972   2      
 973   2               }
 974   1      
 975   1      }
 976          
C51 COMPILER V9.00   VIDEO                                                                 08/19/2014 19:44:31 PAGE 17  

 977          void transss()
 978          
 979          {
 980   1      
 981   1               uchar i,j;
 982   1      
 983   1               for (i=0;i<8;i++)
 984   1      
 985   1               {
 986   2      
 987   2                         for (j=0;j<8;j++)
 988   2      
 989   2                         display[i][j]<<=1;
 990   2      
 991   2               }
 992   1      
 993   1      }
 994          
 995           
 996          
 997          /*From now on,the function below is to display the flash.*/
 998          
 999          void flash_1()
1000          
1001          {
1002   1      
1003   1       
1004   1      
1005   1               clear(0);
1006   1      
1007   1               type(1,0);
1008   1      
1009   1               delay(60000);
1010   1      
1011   1               type(2,0);
1012   1      
1013   1               delay(60000);
1014   1      
1015   1               type(3,0);
1016   1      
1017   1               delay(60000);
1018   1      
1019   1               type(4,0);
1020   1      
1021   1               delay(60000);
1022   1      
1023   1               delay(60000);
1024   1      
1025   1               clear(0);
1026   1      
1027   1               rolldisplay(30000);
1028   1      
1029   1               type(0,7);
1030   1      
1031   1               delay(60000);
1032   1      
1033   1               trailler(6000);
1034   1      
1035   1               delay(60000);
1036   1      
1037   1      }
1038          
C51 COMPILER V9.00   VIDEO                                                                 08/19/2014 19:44:31 PAGE 18  

1039          void flash_2()
1040          
1041          {
1042   1      
1043   1               uchar i;
1044   1      
1045   1               for (i=129;i>0;i--)
1046   1      
1047   1               {
1048   2      
1049   2                         cirp(i-2,0,1);
1050   2      
1051   2                         delay(8000);
1052   2      
1053   2                         cirp(i-1,0,0);
1054   2      
1055   2               }
1056   1      
1057   1               delay(8000);     
1058   1      
1059   1               for (i=0;i<136;i++)
1060   1      
1061   1               {
1062   2      
1063   2                         cirp(i,1,1);
1064   2      
1065   2                         delay(8000);
1066   2      
1067   2                         cirp(i-8,1,0);
1068   2      
1069   2               }
1070   1      
1071   1               delay(8000);
1072   1      
1073   1                        for (i=129;i>0;i--)
1074   1      
1075   1               {
1076   2      
1077   2                         cirp(i-2,0,1);
1078   2      
1079   2                         delay(8000);
1080   2      
1081   2               }
1082   1      
1083   1               delay(8000);
1084   1      
1085   1                         for (i=0;i<128;i++)
1086   1      
1087   1               {
1088   2      
1089   2                         cirp(i-8,1,0);
1090   2      
1091   2                         delay(8000);
1092   2      
1093   2               }
1094   1      
1095   1               delay(60000);  
1096   1      
1097   1      }
1098          
1099          void flash_3()
1100          
C51 COMPILER V9.00   VIDEO                                                                 08/19/2014 19:44:31 PAGE 19  

1101          {
1102   1      
1103   1               char i;
1104   1      
1105   1               for (i=0;i<8;i++)
1106   1      
1107   1               {
1108   2      
1109   2                         box_apeak_xy(0,i,0,7,i,7,1,1);
1110   2      
1111   2                         delay(20000);
1112   2      
1113   2                         if (i<7)
1114   2      
1115   2                         box_apeak_xy(0,i,0,7,i,7,1,0);
1116   2      
1117   2               }
1118   1      
1119   1               for (i=7;i>=0;i--)
1120   1      
1121   1               {
1122   2      
1123   2                         box_apeak_xy(0,i,0,7,i,7,1,1);
1124   2      
1125   2                         delay(20000);
1126   2      
1127   2                         if (i>0)
1128   2      
1129   2                         box_apeak_xy(0,i,0,7,i,7,1,0);
1130   2      
1131   2               }
1132   1      
1133   1               for (i=0;i<8;i++)
1134   1      
1135   1               {
1136   2      
1137   2                         box_apeak_xy(0,i,0,7,i,7,1,1);
1138   2      
1139   2                         delay(20000);
1140   2      
1141   2                         if (i<7)
1142   2      
1143   2                         box_apeak_xy(0,i,0,7,i,7,1,0);
1144   2      
1145   2               }
1146   1      
1147   1      }
1148          
1149          void flash_4()
1150          
1151          {
1152   1      
1153   1               char i,j,an[8];
1154   1      
1155   1               for (j=7;j<15;j++)
1156   1      
1157   1                         an[j-7]=j;
1158   1      
1159   1               for (i=0;i<=16;i++)
1160   1      
1161   1               {
1162   2      
C51 COMPILER V9.00   VIDEO                                                                 08/19/2014 19:44:31 PAGE 20  

1163   2                         for (j=0;j<8;j++)
1164   2      
1165   2                         {
1166   3      
1167   3                                  if ((an[j]<8)&(an[j]>=0))
1168   3      
1169   3                                  line(0,an[j],j,7,an[j],j,1);
1170   3      
1171   3                         }
1172   2      
1173   2                         for (j=0;j<8;j++)
1174   2      
1175   2                         {
1176   3      
1177   3                                  if (((an[j]+1)<8)&(an[j]>=0))
1178   3      
1179   3                                  line(0,an[j]+1,j,7,an[j]+1,j,0);
1180   3      
1181   3                         }
1182   2      
1183   2                         for (j=0;j<8;j++)
1184   2      
1185   2                         {
1186   3      
1187   3                                  if (an[j]>0)
1188   3      
1189   3                                  an[j]--;
1190   3      
1191   3                         }
1192   2      
1193   2                         delay(15000);
1194   2      
1195   2               }
1196   1      
1197   1               for (j=0;j<8;j++)
1198   1      
1199   1                         an[j]=1-j;
1200   1      
1201   1               for (i=0;i<=16;i++)
1202   1      
1203   1               {
1204   2      
1205   2                         for (j=0;j<8;j++)
1206   2      
1207   2                         {
1208   3      
1209   3                                  if ((an[j]<8)&(an[j]>=0))
1210   3      
1211   3                                  line(0,an[j],j,7,an[j],j,1);
1212   3      
1213   3                         }
1214   2      
1215   2                         for (j=0;j<8;j++)
1216   2      
1217   2                         {
1218   3      
1219   3                                  if (((an[j]-1)<7)&(an[j]>0))
1220   3      
1221   3                                  line(0,an[j]-1,j,7,an[j]-1,j,0);
1222   3      
1223   3                         }
1224   2      
C51 COMPILER V9.00   VIDEO                                                                 08/19/2014 19:44:31 PAGE 21  

1225   2                         for (j=0;j<8;j++)
1226   2      
1227   2                         {
1228   3      
1229   3                                  if (an[j]<7)
1230   3      
1231   3                                  an[j]++;
1232   3      
1233   3                         }
1234   2      
1235   2                         delay(15000);
1236   2      
1237   2               }
1238   1      
1239   1      }
1240          void flash_5()
1241          
1242          {
1243   1      
1244   1               uint a=15000;//a=delay
1245   1      
1246   1               char i=8,j,an[4];
1247   1      
1248   1               //1
1249   1      
1250   1               for (j=7;j<11;j++)
1251   1      
1252   1                         an[j-7]=j;
1253   1      
1254   1               while(i--)
1255   1      
1256   1               {
1257   2      
1258   2                         for (j=0;j<4;j++)
1259   2      
1260   2                         {
1261   3      
1262   3                                  if (an[j]<8)
1263   3      
1264   3                                  box_apeak_xy(j,an[j],j,7-j,an[j],7-j,0,1);
1265   3      
1266   3                                  if (an[j]<7)
1267   3      
1268   3                                  box_apeak_xy(j,an[j]+1,j,7-j,an[j]+1,7-j,0,0);
1269   3      
1270   3                         }
1271   2      
1272   2                         for (j=0;j<4;j++)
1273   2      
1274   2                         {
1275   3      
1276   3                                  if (an[j]>3)
1277   3      
1278   3                                  an[j]--;
1279   3      
1280   3                         }
1281   2      
1282   2                         delay(a);
1283   2      
1284   2               }
1285   1      
1286   1               //2
C51 COMPILER V9.00   VIDEO                                                                 08/19/2014 19:44:31 PAGE 22  

1287   1      
1288   1               i=3;
1289   1      
1290   1               for (j=0;j<4;j++)
1291   1      
1292   1               an[j]=5-j;
1293   1      
1294   1               while(i--)
1295   1      
1296   1               {
1297   2      
1298   2                         for (j=1;j<4;j++)
1299   2      
1300   2                         {
1301   3      
1302   3                                  if (an[j]<4)
1303   3      
1304   3                                  box_apeak_xy(j,an[j],j,7-j,an[j],7-j,0,1);
1305   3      
1306   3                                  if (an[j]<3)
1307   3      
1308   3                                  box_apeak_xy(j,an[j]+1,j,7-j,an[j]+1,7-j,0,0);
1309   3      
1310   3                         }
1311   2      
1312   2                         for (j=0;j<4;j++)
1313   2      
1314   2                         {
1315   3      
1316   3                                  if (an[j]>0)
1317   3      
1318   3                                  an[j]--;
1319   3      
1320   3                         }
1321   2      
1322   2                         delay(a);
1323   2      
1324   2               }
1325   1      
1326   1               //3
1327   1      
1328   1               i=3;
1329   1      
1330   1               for (j=1;j<4;j++)
1331   1      
1332   1               an[j]=4-j;
1333   1      
1334   1               while(i--)
1335   1      
1336   1               {
1337   2      
1338   2                         for (j=1;j<4;j++)
1339   2      
1340   2                         {
1341   3      
1342   3                                  if (an[j]>=0)
1343   3      
1344   3                                  box_apeak_xy(j,an[j],j,7-j,an[j],7-j,0,1);
1345   3      
1346   3                                  if (an[j]>0)
1347   3      
1348   3                                  box_apeak_xy(j,an[j]-1,j,7-j,an[j]-1,7-j,0,0);
C51 COMPILER V9.00   VIDEO                                                                 08/19/2014 19:44:31 PAGE 23  

1349   3      
1350   3                         }
1351   2      
1352   2                         for (j=1;j<4;j++)
1353   2      
1354   2                         {
1355   3      
1356   3                                  if (an[j]<3)
1357   3      
1358   3                                  an[j]++;
1359   3      
1360   3                         }
1361   2      
1362   2                         delay(a);
1363   2      
1364   2               }
1365   1      
1366   1       
1367   1      
1368   1               //4
1369   1      
1370   1               i=3;
1371   1      
1372   1               for (j=0;j<4;j++)
1373   1      
1374   1               an[j]=j+1;
1375   1      
1376   1               while(i--)
1377   1      
1378   1               {
1379   2      
1380   2                         for (j=1;j<4;j++)
1381   2      
1382   2                         {
1383   3      
1384   3                                  if (an[j]>3)
1385   3      
1386   3                                  box_apeak_xy(j,an[j],j,7-j,an[j],7-j,0,1);
1387   3      
1388   3                                  if (an[j]>3)
1389   3      
1390   3                                  box_apeak_xy(j,an[j]-1,j,7-j,an[j]-1,7-j,0,0);
1391   3      
1392   3                         }
1393   2      
1394   2                         for (j=0;j<4;j++)
1395   2      
1396   2                                  an[j]++;
1397   2      
1398   2                         delay(a);
1399   2      
1400   2               }
1401   1      
1402   1               //5
1403   1      
1404   1               i=3;
1405   1      
1406   1               for (j=3;j<6;j++)
1407   1      
1408   1                         an[j-2]=j;
1409   1      
1410   1               while(i--)
C51 COMPILER V9.00   VIDEO                                                                 08/19/2014 19:44:31 PAGE 24  

1411   1      
1412   1               {
1413   2      
1414   2                         for (j=1;j<4;j++)
1415   2      
1416   2                         {
1417   3      
1418   3                                  box_apeak_xy(j,an[j],j,7-j,an[j],7-j,0,1);
1419   3      
1420   3                                  box_apeak_xy(j,an[j]+1,j,7-j,an[j]+1,7-j,0,0);
1421   3      
1422   3                         }
1423   2      
1424   2                         for (j=0;j<4;j++)
1425   2      
1426   2                         {
1427   3      
1428   3                                  if (an[j]>3)
1429   3      
1430   3                                  an[j]--;
1431   3      
1432   3                         }
1433   2      
1434   2                         delay(a);
1435   2      
1436   2               }
1437   1      
1438   1               //6
1439   1      
1440   1               i=3;
1441   1      
1442   1               for (j=0;j<4;j++)
1443   1      
1444   1               an[j]=5-j;
1445   1      
1446   1               while(i--)
1447   1      
1448   1               {
1449   2      
1450   2                         for (j=1;j<4;j++)
1451   2      
1452   2                         {
1453   3      
1454   3                                  if (an[j]<4)
1455   3      
1456   3                                  box_apeak_xy(j,an[j],j,7-j,an[j],7-j,0,1);
1457   3      
1458   3                                  if (an[j]<3)
1459   3      
1460   3                                  box_apeak_xy(j,an[j]+1,j,7-j,an[j]+1,7-j,0,0);
1461   3      
1462   3                         }
1463   2      
1464   2                         for (j=0;j<4;j++)
1465   2      
1466   2                         {
1467   3      
1468   3                                  if (an[j]>0)
1469   3      
1470   3                                  an[j]--;
1471   3      
1472   3                         }
C51 COMPILER V9.00   VIDEO                                                                 08/19/2014 19:44:31 PAGE 25  

1473   2      
1474   2                         delay(a);
1475   2      
1476   2               }
1477   1      
1478   1               //7
1479   1      
1480   1               i=3;
1481   1      
1482   1               for (j=0;j<4;j++)
1483   1      
1484   1               an[j]=3-j;
1485   1      
1486   1               an[0]=2;
1487   1      
1488   1               while(i--)
1489   1      
1490   1               {
1491   2      
1492   2                         for (j=0;j<3;j++)
1493   2      
1494   2                         {
1495   3      
1496   3                                  if (an[j]>=0)
1497   3      
1498   3                                           box_apeak_xy(j,an[j],j,7-j,an[j],7-j,0,1);
1499   3      
1500   3                                  if (an[j]>=0)
1501   3      
1502   3                                           box_apeak_xy(j,an[j]+1,j,7-j,an[j]+1,7-j,0,0);
1503   3      
1504   3                         }
1505   2      
1506   2                         for (j=0;j<4;j++)
1507   2      
1508   2                         {
1509   3      
1510   3                                  if (j<5-i)
1511   3      
1512   3                                  an[j]--;
1513   3      
1514   3                         }
1515   2      
1516   2                         delay(a);
1517   2      
1518   2               }
1519   1      
1520   1               //8
1521   1      
1522   1               i=10;
1523   1      
1524   1               for (j=0;j<4;j++)
1525   1      
1526   1                         an[j]=j-2;
1527   1      
1528   1               while(i--)
1529   1      
1530   1               {
1531   2      
1532   2                         for (j=0;j<4;j++)
1533   2      
1534   2                         {
C51 COMPILER V9.00   VIDEO                                                                 08/19/2014 19:44:31 PAGE 26  

1535   3      
1536   3                                  if (an[j]>=0)
1537   3      
1538   3                                  box_apeak_xy(j,an[j],j,7-j,an[j],7-j,0,1);
1539   3      
1540   3                                  if (an[j]>=0)
1541   3      
1542   3                                  box_apeak_xy(j,an[j]-1,j,7-j,an[j]-1,7-j,0,0);
1543   3      
1544   3                         }
1545   2      
1546   2                         for (j=0;j<4;j++)
1547   2      
1548   2                         {
1549   3      
1550   3                                  if (an[j]<7)
1551   3      
1552   3                                  an[j]++;
1553   3      
1554   3                         }
1555   2      
1556   2                         delay(a);
1557   2      
1558   2               }
1559   1      
1560   1      }
1561          
1562          void flash_6()
1563          
1564          {
1565   1      
1566   1            uchar i,j,k,z;
1567   1      
1568   1            roll_apeak_yz(1,10000);
1569   1      
1570   1            roll_apeak_yz(2,10000);
1571   1      
1572   1            roll_apeak_yz(3,10000);
1573   1      
1574   1            roll_apeak_yz(0,10000);
1575   1      
1576   1            roll_apeak_yz(1,10000);
1577   1      
1578   1            roll_apeak_yz(2,10000);
1579   1      
1580   1            roll_apeak_yz(3,10000);
1581   1      
1582   1            for (i=0;i<3;i++)
1583   1      
1584   1                     {
1585   2      
1586   2                               for (j=0;j<8;j++)
1587   2      
1588   2                               {
1589   3      
1590   3                                        for (k=0;k<8;k++)
1591   3      
1592   3                                        {
1593   4      
1594   4                                                 if ((table_3p[i][j]>>k)&1)
1595   4      
1596   4                                                 {
C51 COMPILER V9.00   VIDEO                                                                 08/19/2014 19:44:31 PAGE 27  

1597   5      
1598   5                                                           for (z=1;z<8;z++)
1599   5      
1600   5                                                                    {
1601   6      
1602   6                                                                             point (j,7-k,z,1);
1603   6      
1604   6                                                                             if (z-1)
1605   6      
1606   6                                                                             point (j,7-k,z-1,0);
1607   6      
1608   6                                                                             delay(5000);
1609   6      
1610   6                                                                    }
1611   5      
1612   5                                                 }
1613   4      
1614   4                                        }
1615   3      
1616   3                               }
1617   2      
1618   2                               trans(7,15000);
1619   2      
1620   2                     }
1621   1      
1622   1      }
1623          
1624          void flash_7()
1625          
1626          {
1627   1      
1628   1            uchar i;
1629   1      
1630   1            uint a=3000;
1631   1      
1632   1            roll_apeak_yz(0,10000);
1633   1      
1634   1            roll_apeak_yz(1,10000);
1635   1      
1636   1            roll_apeak_yz(2,10000);
1637   1      
1638   1            roll_apeak_yz(3,10000);
1639   1      
1640   1            roll_apeak_yz(0,10000);
1641   1      
1642   1            roll_apeak_yz(1,10000);
1643   1      
1644   1            roll_apeak_yz(2,10000);
1645   1      
1646   1            roll_apeak_yz(3,10000);
1647   1      
1648   1            roll_apeak_yz(0,10000);
1649   1      
1650   1            roll_apeak_yz(1,10000);
1651   1      
1652   1            roll_apeak_yz(2,10000);
1653   1      
1654   1            roll_apeak_xy(0,10000);
1655   1      
1656   1            roll_apeak_xy(1,10000);
1657   1      
1658   1            roll_apeak_xy(2,10000);
C51 COMPILER V9.00   VIDEO                                                                 08/19/2014 19:44:31 PAGE 28  

1659   1      
1660   1            roll_apeak_xy(3,10000);
1661   1      
1662   1            roll_apeak_xy(0,10000);
1663   1      
1664   1            roll_apeak_xy(1,10000);
1665   1      
1666   1            roll_apeak_xy(2,10000);
1667   1      
1668   1            roll_apeak_xy(3,10000);
1669   1      
1670   1            for (i=0;i<8;i++)
1671   1      
1672   1            {
1673   2      
1674   2                     box_apeak_xy (0,i,0,7-i,i,7,1,1);
1675   2      
1676   2                     delay(a);
1677   2      
1678   2            }
1679   1      
1680   1            delay(30000);
1681   1      
1682   1            roll_3_xy(0,a);
1683   1      
1684   1            delay(30000);
1685   1      
1686   1            roll_3_xy(1,a);
1687   1      
1688   1            delay(30000);
1689   1      
1690   1            roll_3_xy(2,a);
1691   1      
1692   1            delay(30000);
1693   1      
1694   1            roll_3_xy(3,a);
1695   1      
1696   1            delay(30000);
1697   1      
1698   1            roll_3_xy(0,a);
1699   1      
1700   1            delay(30000);
1701   1      
1702   1            roll_3_xy(1,a);
1703   1      
1704   1            delay(30000);
1705   1      
1706   1            roll_3_xy(2,a);
1707   1      
1708   1            delay(30000);
1709   1      
1710   1            roll_3_xy(3,a);
1711   1      
1712   1            for (i=7;i>0;i--)
1713   1      
1714   1            {
1715   2      
1716   2                     box_apeak_xy(i,0,0,i,7,7,1,0);
1717   2      
1718   2                     delay(a);
1719   2      
1720   2            }
C51 COMPILER V9.00   VIDEO                                                                 08/19/2014 19:44:31 PAGE 29  

1721   1      
1722   1      }
1723          
1724          void flash_8()
1725          
1726          {
1727   1      
1728   1            uchar i;
1729   1      
1730   1            for (i=5;i<8;i++)
1731   1      
1732   1            {
1733   2      
1734   2                     tranoutchar(i,10000);
1735   2      
1736   2                     delay(60000);
1737   2      
1738   2                     delay(60000);
1739   2      
1740   2            }
1741   1      
1742   1      }
1743          
1744          void flash_9()
1745          
1746          {
1747   1      
1748   1            char i;
1749   1      
1750   1            uchar j,an[8],x,y,t,x1,y1;
1751   1      
1752   1            for (i=0;i<8;i++)
1753   1      
1754   1            {
1755   2      
1756   2                     box_apeak_xy (i,0,0,i,7,7,1,1);
1757   2      
1758   2                     if (i)
1759   2      
1760   2                     box_apeak_xy (i-1,0,0,i-1,7,7,1,0);
1761   2      
1762   2                     delay(10000);
1763   2      
1764   2            }
1765   1      
1766   1            roll_apeak_xy(3,10000);
1767   1      
1768   1            roll_apeak_xy(0,10000);
1769   1      
1770   1            roll_apeak_xy(1,10000);
1771   1      
1772   1            for (i=0;i<7;i++)
1773   1      
1774   1            {
1775   2      
1776   2                     line(6-i,6-i,0,6-i,6-i,7,1);
1777   2      
1778   2                     line(i,7,0,i,7,7,0);
1779   2      
1780   2                     delay(10000);
1781   2      
1782   2            }
C51 COMPILER V9.00   VIDEO                                                                 08/19/2014 19:44:31 PAGE 30  

1783   1      
1784   1            for (i=0;i<8;i++)
1785   1      
1786   1                     an[i]=14;
1787   1      
1788   1            for (i=0;i<85;i++)
1789   1      
1790   1            {
1791   2      
1792   2                     clear(0);
1793   2      
1794   2                     for (j=0;j<8;j++)
1795   2      
1796   2                     {
1797   3      
1798   3                               t=an[j]%28;
1799   3      
1800   3                               x=dat2[t]>>5;
1801   3      
1802   3                               y=(dat2[t]>>2)&0x07;
1803   3      
1804   3                               t=(an[j]-14)%28;
1805   3      
1806   3                               x1=dat2[t]>>5;
1807   3      
1808   3                               y1=(dat2[t]>>2)&0x07;
1809   3      
1810   3                               line(x,y,j,x1,y1,j,1);
1811   3      
1812   3                     }
1813   2      
1814   2                     for (j=0;j<8;j++)
1815   2      
1816   2                     {
1817   3      
1818   3                     if ((i>j)&(j>i-71))
1819   3      
1820   3                     an[j]++;
1821   3      
1822   3                     } 
1823   2      
1824   2                     delay(5000);
1825   2      
1826   2            }
1827   1      
1828   1            for (i=0;i<85;i++)
1829   1      
1830   1            {
1831   2      
1832   2                     clear(0);
1833   2      
1834   2                     for (j=0;j<8;j++)
1835   2      
1836   2                     {
1837   3      
1838   3                               t=an[j]%28;
1839   3      
1840   3                               x=dat2[t]>>5;
1841   3      
1842   3                               y=(dat2[t]>>2)&0x07;
1843   3      
1844   3                               t=(an[j]-14)%28;
C51 COMPILER V9.00   VIDEO                                                                 08/19/2014 19:44:31 PAGE 31  

1845   3      
1846   3                               x1=dat2[t]>>5;
1847   3      
1848   3                               y1=(dat2[t]>>2)&0x07;
1849   3      
1850   3                               line(x,y,j,x1,y1,j,1);
1851   3      
1852   3                     }
1853   2      
1854   2                     for (j=0;j<8;j++)
1855   2      
1856   2                     {
1857   3      
1858   3                     if ((i>j)&(j>i-71))
1859   3      
1860   3                     an[j]--;
1861   3      
1862   3                     } 
1863   2      
1864   2                     delay(5000);
1865   2      
1866   2            }
1867   1      
1868   1            for (i=0;i<29;i++)
1869   1      
1870   1            {
1871   2      
1872   2                     clear(0);
1873   2      
1874   2      
1875   2      
1876   2                     t=an[0]%28;
1877   2      
1878   2                     x=dat2[t]>>5;
1879   2      
1880   2                     y=(dat2[t]>>2)&0x07;
1881   2      
1882   2                     t=(an[0]-14)%28;
1883   2      
1884   2                     x1=dat2[t]>>5;
1885   2      
1886   2                     y1=(dat2[t]>>2)&0x07;
1887   2      
1888   2                     box_apeak_xy(x,y,0,x1,y1,7,0,1);
1889   2      
1890   2                     box_apeak_xy(x,y,1,x1,y1,6,0,1);
1891   2      
1892   2                     an[0]++; 
1893   2      
1894   2                     delay(5000);
1895   2      
1896   2            }
1897   1      
1898   1            for (i=0;i<16;i++)
1899   1      
1900   1            {
1901   2      
1902   2                     clear(0);
1903   2      
1904   2      
1905   2      
1906   2                     t=an[0]%28;
C51 COMPILER V9.00   VIDEO                                                                 08/19/2014 19:44:31 PAGE 32  

1907   2      
1908   2                     x=dat2[t]>>5;
1909   2      
1910   2                     y=(dat2[t]>>2)&0x07;
1911   2      
1912   2                     t=(an[0]-14)%28;
1913   2      
1914   2                     x1=dat2[t]>>5;
1915   2      
1916   2                     y1=(dat2[t]>>2)&0x07;
1917   2      
1918   2                     box_apeak_xy(x,y,0,x1,y1,7,1,1);
1919   2      
1920   2                     an[0]--; 
1921   2      
1922   2                     delay(5000);
1923   2      
1924   2            }
1925   1      
1926   1            for (i=0;i<8;i++)
1927   1      
1928   1            {
1929   2      
1930   2                     line(i,i,0,0,0,i,0);
1931   2      
1932   2                     delay(5000);
1933   2      
1934   2            }
1935   1      
1936   1            for (i=1;i<7;i++)
1937   1      
1938   1            {
1939   2      
1940   2                     line(i,i,7,7,7,i,0);
1941   2      
1942   2                     delay(5000);
1943   2      
1944   2            }
1945   1      
1946   1            for (i=1;i<8;i++)
1947   1      
1948   1            {
1949   2      
1950   2                     clear(0);
1951   2      
1952   2                     box(7,7,7,7-i,7-i,7-i,0,1);
1953   2      
1954   2                     delay(10000);
1955   2      
1956   2            }
1957   1      
1958   1            for (i=1;i<7;i++)
1959   1      
1960   1            {
1961   2      
1962   2                     clear(0);
1963   2      
1964   2                     box(0,0,0,7-i,7-i,7-i,0,1);
1965   2      
1966   2                     delay(10000);
1967   2      
1968   2            }
C51 COMPILER V9.00   VIDEO                                                                 08/19/2014 19:44:31 PAGE 33  

1969   1      
1970   1            for (i=1;i<8;i++)
1971   1      
1972   1            {
1973   2      
1974   2                     clear(0);
1975   2      
1976   2                     box(0,0,0,i,i,i,0,1);
1977   2      
1978   2                     delay(10000);
1979   2      
1980   2            }
1981   1      
1982   1            for (i=1;i<7;i++)
1983   1      
1984   1            {
1985   2      
1986   2                     clear(0);
1987   2      
1988   2                     box(7,0,0,i,7-i,7-i,0,1);
1989   2      
1990   2                     delay(10000);
1991   2      
1992   2            }
1993   1      
1994   1            for (i=1;i<8;i++)
1995   1      
1996   1            {
1997   2      
1998   2                     box(7,0,0,7-i,i,i,1,1);
1999   2      
2000   2                     delay(10000);
2001   2      
2002   2            }
2003   1      
2004   1            for (i=1;i<7;i++)
2005   1      
2006   1            {
2007   2      
2008   2                     clear(0);
2009   2      
2010   2                     box(0,7,7,7-i,i,i,1,1);
2011   2      
2012   2                     delay(10000);
2013   2      
2014   2            }
2015   1      
2016   1      }
2017          
2018          void flash_10()
2019          
2020          {
2021   1      
2022   1            uchar i,j,an[4],x,y,t;
2023   1      
2024   1            for (i=1;i<7;i++)
2025   1      
2026   1            {
2027   2      
2028   2                     
2029   2      
2030   2                     clear(0);
C51 COMPILER V9.00   VIDEO                                                                 08/19/2014 19:44:31 PAGE 34  

2031   2      
2032   2                     box(0,6,6,1,7,7,1,1);
2033   2      
2034   2                     box(i,6,6-i,i+1,7,7-i,1,1);
2035   2      
2036   2                     box(i,6,6,i+1,7,7,1,1);
2037   2      
2038   2                     box(0,6,6-i,1,7,7-i,1,1);
2039   2      
2040   2                     box(0,6-i,6,1,7-i,7,1,1);
2041   2      
2042   2                     box(i,6-i,6-i,i+1,7-i,7-i,1,1);
2043   2      
2044   2                     box(i,6-i,6,i+1,7-i,7,1,1);
2045   2      
2046   2                     box(0,6-i,6-i,1,7-i,7-i,1,1);
2047   2      
2048   2                     delay(30000);
2049   2      
2050   2            }
2051   1      
2052   1            for (i=0;i<4;i++)
2053   1      
2054   1            {
2055   2      
2056   2                     an[i]=6*i;
2057   2      
2058   2            }
2059   1      
2060   1            for (i=0;i<35;i++)
2061   1      
2062   1            {
2063   2      
2064   2                     clear(0);
2065   2      
2066   2                     for(j=0;j<4;j++)
2067   2      
2068   2                     {
2069   3      
2070   3                               t=an[j]%24;
2071   3      
2072   3                               x=dat3[t]>>4;
2073   3      
2074   3                               y=dat3[t]&0x0f;
2075   3      
2076   3                               box(x,y,0,x+1,y+1,1,1,1);
2077   3      
2078   3                               box(x,y,6,x+1,y+1,7,1,1);
2079   3      
2080   3                     }
2081   2      
2082   2                     for (j=0;j<4;j++)
2083   2      
2084   2                     an[j]++; 
2085   2      
2086   2                     delay(10000);
2087   2      
2088   2            }
2089   1      
2090   1            for (i=0;i<35;i++)
2091   1      
2092   1            {
C51 COMPILER V9.00   VIDEO                                                                 08/19/2014 19:44:31 PAGE 35  

2093   2      
2094   2                     clear(0);
2095   2      
2096   2                     for(j=0;j<4;j++)
2097   2      
2098   2                     {
2099   3      
2100   3                               t=an[j]%24;
2101   3      
2102   3                               x=dat3[t]>>4;
2103   3      
2104   3                               y=dat3[t]&0x0f;
2105   3      
2106   3                               box(x,y,0,x+1,y+1,1,1,1);
2107   3      
2108   3                               box(x,y,6,x+1,y+1,7,1,1);
2109   3      
2110   3                     }
2111   2      
2112   2                     for (j=0;j<4;j++)
2113   2      
2114   2                     an[j]--; 
2115   2      
2116   2                     delay(10000);
2117   2      
2118   2            }
2119   1      
2120   1            for (i=0;i<35;i++)
2121   1      
2122   1            {
2123   2      
2124   2                     clear(0);
2125   2      
2126   2                     for(j=0;j<4;j++)
2127   2      
2128   2                     {
2129   3      
2130   3                               t=an[j]%24;
2131   3      
2132   3                               x=dat3[t]>>4;
2133   3      
2134   3                               y=dat3[t]&0x0f;
2135   3      
2136   3                               box(x,0,y,x+1,1,y+1,1,1);
2137   3      
2138   3                               box(x,6,y,x+1,7,y+1,1,1);
2139   3      
2140   3                     }
2141   2      
2142   2                     for (j=0;j<4;j++)
2143   2      
2144   2                     an[j]++; 
2145   2      
2146   2                     delay(10000);
2147   2      
2148   2            }
2149   1      
2150   1            for (i=0;i<36;i++)
2151   1      
2152   1            {
2153   2      
2154   2                     clear(0);
C51 COMPILER V9.00   VIDEO                                                                 08/19/2014 19:44:31 PAGE 36  

2155   2      
2156   2                     for(j=0;j<4;j++)
2157   2      
2158   2                     {
2159   3      
2160   3                               t=an[j]%24;
2161   3      
2162   3                               x=dat3[t]>>4;
2163   3      
2164   3                               y=dat3[t]&0x0f;
2165   3      
2166   3                               box(x,0,y,x+1,1,y+1,1,1);
2167   3      
2168   3                               box(x,6,y,x+1,7,y+1,1,1);
2169   3      
2170   3                     }
2171   2      
2172   2                     for (j=0;j<4;j++)
2173   2      
2174   2                     an[j]--; 
2175   2      
2176   2                     delay(10000);
2177   2      
2178   2            }
2179   1      
2180   1            for (i=6;i>0;i--)
2181   1      
2182   1            {
2183   2      
2184   2                     
2185   2      
2186   2                     clear(0);
2187   2      
2188   2                     box(0,6,6,1,7,7,1,1);
2189   2      
2190   2                     box(i,6,6-i,i+1,7,7-i,1,1);
2191   2      
2192   2                     box(i,6,6,i+1,7,7,1,1);
2193   2      
2194   2                     box(0,6,6-i,1,7,7-i,1,1);
2195   2      
2196   2                     box(0,6-i,6,1,7-i,7,1,1);
2197   2      
2198   2                     box(i,6-i,6-i,i+1,7-i,7-i,1,1);
2199   2      
2200   2                     box(i,6-i,6,i+1,7-i,7,1,1);
2201   2      
2202   2                     box(0,6-i,6-i,1,7-i,7-i,1,1);
2203   2      
2204   2                     delay(30000);
2205   2      
2206   2            }
2207   1      
2208   1      }
2209          
2210          void flash_11()
2211          
2212          {
2213   1      
2214   1            uchar i,j,t,x,y;
2215   1      
2216   1            uchar code daa[13]={0,1,2,0x23,5,6,7,6,5,0x23,2,1,0};
C51 COMPILER V9.00   VIDEO                                                                 08/19/2014 19:44:31 PAGE 37  

2217   1      
2218   1            for (j=0;j<5;j++)
2219   1      
2220   1            {
2221   2      
2222   2                     for (i=0;i<13;i++)
2223   2      
2224   2                     {
2225   3      
2226   3                               if (daa[i]>>4)
2227   3      
2228   3                               {
2229   4      
2230   4                                        t=daa[i]&0x0f;
2231   4      
2232   4                                        line (0,0,t+1,0,7,t+1,1);
2233   4      
2234   4                               }
2235   3      
2236   3                               else 
2237   3      
2238   3                                        t=daa[i];
2239   3      
2240   3                               line (0,0,t,0,7,t,1);
2241   3      
2242   3                               transss();
2243   3      
2244   3                               delay(10000);
2245   3      
2246   3                     }
2247   2      
2248   2            }
2249   1      
2250   1            for (j=1;j<8;j++)
2251   1      
2252   1            {
2253   2      
2254   2                     if (j>3)
2255   2      
2256   2                               t=4;
2257   2      
2258   2                     else
2259   2      
2260   2                               t=j;
2261   2      
2262   2                     for (i=0;i<24;i+=j)
2263   2      
2264   2                     {
2265   3      
2266   3                               x=dat3[i]>>4;
2267   3      
2268   3                               y=dat3[i]&0x0f;
2269   3      
2270   3                               box_apeak_xy(0,x,y,0,x+1,y+1,1,1);
2271   3      
2272   3                               transss();
2273   3      
2274   3                               delay(10000);
2275   3      
2276   3                     }
2277   2      
2278   2            }
C51 COMPILER V9.00   VIDEO                                                                 08/19/2014 19:44:31 PAGE 38  

2279   1      
2280   1            for (j=1;j<8;j++)
2281   1      
2282   1            {
2283   2      
2284   2                     if (j>3)
2285   2      
2286   2                               t=4;
2287   2      
2288   2                     else
2289   2      
2290   2                               t=j;
2291   2      
2292   2                     for (i=0;i<24;i+=j)
2293   2      
2294   2                     {
2295   3      
2296   3                               x=dat3[i]>>4;
2297   3      
2298   3                               y=dat3[i]&0x0f;
2299   3      
2300   3                               point (0,x,y,1);
2301   3      
2302   3                               transss();
2303   3      
2304   3                               delay(10000);
2305   3      
2306   3                     }
2307   2      
2308   2            }
2309   1      
2310   1      }
2311          void video()
2312          
2313          {
2314   1                      num=0;
2315   1                      k2=0;
2316   1                      sinter();
2317   1                      ET0=1;
2318   1                      TR0=1;
2319   1      
2320   1                      clear (0);              
2321   1                      while(1)
2322   1                      {
2323   2                      /*      ir();
2324   2                              if(ircode[2]==0x0c)i=1;
2325   2                              if(ircode[2]==0x18)i=2;
2326   2                              if(ircode[2]==0x5e)i=3;
2327   2                              if(ircode[2]==0x08)i=4;
2328   2                              if(ircode[2]==0x1c)i=5;
2329   2                              if(ircode[2]==0x5a)i=6;
2330   2                              if(ircode[2]==0x42)i=7;
2331   2                              if(ircode[2]==0x52)i=8;
2332   2                              if(ircode[2]==0x4a)i=9;
2333   2                              if(ircode[2]==0x46)break;  */
2334   2      
2335   2              
2336   2                              if(num>=18)num=0;
2337   2                              switch(flash[num])
2338   2                              {
2339   3                                      case 1:flash_2();clear (0);break;
2340   3                                      case 2:flash_3();clear (0);break;
C51 COMPILER V9.00   VIDEO                                                                 08/19/2014 19:44:31 PAGE 39  

2341   3                                      case 3:flash_4();clear (0);break;
2342   3                                      case 4:flash_6();clear (0);break;
2343   3                                      case 5:flash_7();clear (0);break;
2344   3                                      case 6:flash_8();clear (0);break;
2345   3                                      case 7:flash_9();clear (0);break;
2346   3                                      case 8:flash_10();clear (0);break;
2347   3                                      case 9:flash_11();clear (0);break;
2348   3                                      default:clear (0);
2349   3                              }
2350   2                              num++;
2351   2                      }
2352   1                      clear(0);       
2353   1              
2354   1      }
2355          
2356          //P0;   //573 in
2357          //P1;  //uln2803
2358          //P2;  //573 LE
2359          
2360          void print() interrupt 1
2361          
2362          {
2363   1      
2364   1               uchar i;
2365   1      
2366   1               static uchar layer=0;
2367   1      
2368   1               P1=0;
2369   1      
2370   1               for (i=0;i<8;i++)
2371   1      
2372   1               {
2373   2      
2374   2                         P2=1<<i;
2375   2      
2376   2                         delay(3);
2377   2      
2378   2                         P0=display[layer][i];
2379   2      
2380   2                         delay(3);
2381   2      
2382   2               }
2383   1              
2384   1               P1=1<<layer;
2385   1      
2386   1               if (layer<7) 
2387   1      
2388   1                         layer++;
2389   1      
2390   1               else 
2391   1      
2392   1                         layer=0;
2393   1      
2394   1               TH0=0xc0;
2395   1      
2396   1               TL0=0;
2397   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   7879    ----
   CONSTANT SIZE    =    339    ----
C51 COMPILER V9.00   VIDEO                                                                 08/19/2014 19:44:31 PAGE 40  

   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      1     115
   IDATA SIZE       =     64    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
